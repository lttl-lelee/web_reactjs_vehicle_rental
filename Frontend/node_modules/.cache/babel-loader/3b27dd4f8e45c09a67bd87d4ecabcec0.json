{"ast":null,"code":"var _jsxFileName = \"D:\\\\hihi\\\\senior-project\\\\Frontend\\\\src\\\\components\\\\mytrips\\\\BookingRequest.jsx\",\n    _s = $RefreshSig$();\n\n// @ts-nocheck\nimport bookingApi from \"api/bookingApi\";\nimport ItemReport from \"components/vehicle/ItemReport\";\nimport { Field, Form, Formik } from \"formik\";\nimport { comma, formatDateTime } from \"lib/Helper\";\nimport React, { useEffect, useState } from \"react\";\nimport { Button, Col, Row, Form as BForm, Modal } from \"react-bootstrap\";\nimport { AiOutlineRight } from \"react-icons/ai\";\nimport { NOTI } from \"constants/index\"; //@ts-ignore\n\nimport { store as noti } from \"react-notifications-component\";\nimport StarRatings from \"react-star-ratings\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function BookingRequest(props) {\n  _s();\n\n  const booking = props.booking;\n  const status = booking.status;\n  const vehicle = booking.vehicle;\n  const user = booking.user;\n  const [openModal, setOpenModel] = useState(false);\n  const deposit = Math.round(30 * booking.amount / 100000) * 1000;\n  const price = booking.amount - deposit;\n  const [show, setShow] = useState(true);\n  const [showRating, setShowRating] = useState(false);\n  const [rated, setRated] = useState({\n    content: \"\",\n    numStar: 0\n  });\n  const [allRate, setAllRate] = useState([]);\n\n  const handleChangeStar = star => {\n    setRated({ ...rated,\n      numStar: star\n    });\n  };\n\n  const handleCloseModal = () => {\n    setOpenModel(false);\n  };\n\n  const handleCancel = () => {\n    if (window.confirm(\"Bạn muốn hủy yêu cầu thuê xe này?\")) {\n      bookingApi.rejectBooking({\n        id: booking.id\n      });\n      props.history.push(\"/mytrips\");\n    }\n  };\n\n  const handleConfirm = () => {\n    bookingApi.confirmBooking({\n      id: booking.id\n    }).then(res => {\n      setShow(false);\n    });\n  };\n\n  const handleCancelAfterDeposit = () => {\n    if (window.confirm(\"Bạn muốn hủy yêu cầu thuê xe này?\")) {\n      bookingApi.cancelAfterDeposit({\n        id: booking.id\n      }).then(res => {\n        props.history.push(\"/mytrips\");\n      });\n    }\n  };\n\n  const handleVehicleHanding = () => {\n    bookingApi.vehicleHanding({\n      id: booking.id\n    }).then(res => {\n      setShow(false);\n      setShowRating(true);\n    });\n  };\n\n  const handleReceiveBackVehicle = () => {\n    bookingApi.receiveBackVehicle({\n      id: booking.id\n    }).then(res => {\n      setShow(false);\n    });\n  };\n\n  useEffect(() => {\n    setShow(true);\n  }, [props]);\n  useEffect(() => {\n    if (status === \"Hoàn thành\") {\n      bookingApi.getUserBookingRating({\n        id: booking.id\n      }).then(res => {\n        if (res) {\n          setRated(res);\n        }\n      });\n    }\n\n    bookingApi.getAllUserRating({\n      id: booking.id\n    }).then(res => {\n      if (res) {\n        setAllRate(res);\n      }\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"register-vehicle\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"register-heading\",\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          lg: 3,\n          className: \"register-heading-tab\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `tab-number ${status === \"Đang chờ\" ? \"active\" : \"\"}`,\n            children: \"1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Duy\\u1EC7t\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"icon-after\",\n            children: /*#__PURE__*/_jsxDEV(AiOutlineRight, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          lg: 3,\n          className: \"register-heading-tab\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `tab-number ${status === \"Đã duyệt\" ? \"active\" : \"\"}`,\n            children: \"2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u0110\\u1EE3i thanh to\\xE1n c\\u1ECDc\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"icon-after\",\n            children: /*#__PURE__*/_jsxDEV(AiOutlineRight, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          lg: 3,\n          className: \"register-heading-tab\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `tab-number ${status === \"Đã cọc\" || status === \"Đã giao xe\" || status === \"Đã nhận xe\" ? \"active\" : \"\"}`,\n            children: \"3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Giao xe\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"icon-after\",\n            children: /*#__PURE__*/_jsxDEV(AiOutlineRight, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          lg: 3,\n          className: \"register-heading-tab\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `tab-number ${status === \"Hoàn thành\" || status === \"Đã trả xe\" ? \"active\" : \"\"}`,\n            children: \"4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"K\\u1EBFt th\\xFAc\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), status === \"Đã hủy\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-danger booking--width\",\n      children: \"Ng\\u01B0\\u1EDDi d\\xF9ng \\u0111\\xE3 h\\u1EE7y y\\xEAu c\\u1EA7u thu\\xEA xe!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }, this) : status === \"Đã từ chối\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-danger booking--width\",\n      children: \"B\\u1EA1n \\u0111\\xE3 t\\u1EEB ch\\u1ED1i y\\xEAu c\\u1EA7u thu\\xEA xe!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }, this) : status === \"Đã hủy cọc\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-danger booking--width\",\n      children: \"B\\u1EA1n \\u0111\\xE3 h\\u1EE7y y\\xEAu c\\u1EA7u thu\\xEA xe!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }, this) : status === \"Lấy lại cọc\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-danger booking--width\",\n      children: \"Kh\\xE1ch thu\\xEA \\u0111\\xE3 l\\u1EA5y l\\u1EA1i c\\u1ECDc v\\xE0 h\\u1EE7y y\\xEAu c\\u1EA7u!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 9\n    }, this) : null, status === \"Hoàn thành\" || showRating ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"register-body mt-2\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"booking--width\",\n        children: /*#__PURE__*/_jsxDEV(Formik, {\n          enableReinitialize: true,\n          initialValues: {\n            // @ts-ignore\n            content: rated.content,\n            star: rated.numStar\n          },\n          onSubmit: async (values, {\n            setSubmitting\n          }) => {\n            console.log(values);\n            bookingApi.ratingUser({\n              id: booking.id,\n              numStar: values.star,\n              content: values.content,\n              type: vehicle.driver ? \"Có tài xế\" : \"Tự lái\"\n            }).then(res => {\n              noti.addNotification({ ...NOTI,\n                title: \"Thành công\",\n                message: \"Bạn đã đánh giá khách thuê thành công!!!\",\n                type: \"success\",\n                dismiss: {\n                  duration: 3000\n                },\n                width: 160\n              });\n              props.history.push(\"/\");\n            });\n          },\n          children: /*#__PURE__*/_jsxDEV(Form, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-center mb-3\",\n              children: /*#__PURE__*/_jsxDEV(StarRatings, {\n                starRatedColor: \"yellow\",\n                rating: rated.numStar,\n                changeRating: handleChangeStar,\n                numberOfStars: 5,\n                name: \"rating\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(BForm.Group, {\n              className: \"mb-3\",\n              controlId: \"username\",\n              children: /*#__PURE__*/_jsxDEV(Field, {\n                name: \"content\",\n                children: ({\n                  field\n                }) => /*#__PURE__*/_jsxDEV(BForm.Control, {\n                  autoComplete: \"off\",\n                  as: \"textarea\",\n                  ...field,\n                  placeholder: \"Cho m\\u1ECDi ng\\u01B0\\u1EDDi bi\\u1EBFt c\\u1EA3m nh\\u1EADn c\\u1EE7a b\\u1EA1n v\\u1EC1 kh\\xE1ch thu\\xEA n\\xE0y\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              type: \"submit\",\n              children: \"G\\u1EEDi \\u0111\\xE1nh gi\\xE1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 9\n    }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"register-body mt-2\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"booking--width\",\n        children: [/*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            lg: 7,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"booking__item--container\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"booking__item--img\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"image-wrapper\",\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: booking.vehicle.mainImg,\n                    alt: \"\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 224,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-muted\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"fw-bold fs-5 text-dark\",\n                  children: booking.vehicle.model.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"B\\u1EAFt \\u0111\\u1EA7u: \", formatDateTime(booking.startTime, true)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 231,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"K\\u1EBFt th\\xFAc: \", formatDateTime(booking.endTime, true)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            lg: 5,\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Ng\\u01B0\\u1EDDi thu\\xEA: \", user.fullName]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"S\\u0110T ng\\u01B0\\u1EDDi thu\\xEA: \", user.phone]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text--link\",\n              onClick: () => setOpenModel(true),\n              children: \"Xem \\u0111\\xE1nh gi\\xE1 ng\\u01B0\\u1EDDi thu\\xEA\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-light p-3 mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Ti\\u1EC1n c\\u1ECDc\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"text-primary\",\n              children: [comma(deposit), \"\\u20AB\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-light p-3 mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Ti\\u1EC1n nh\\u1EADn t\\u1EEB ng\\u01B0\\u1EDDi thu\\xEA\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              children: [comma(price), \"\\u20AB\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"register-footer\",\n      children: [status === \"Đang chờ\" && show ? /*#__PURE__*/_jsxDEV(Row, {\n        className: \"main\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"danger\",\n            onClick: handleCancel,\n            children: \"T\\u1EEB ch\\u1ED1i y\\xEAu c\\u1EA7u\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            onClick: handleConfirm,\n            children: \"Ch\\u1EA5p nh\\u1EADn y\\xEAu c\\u1EA7u\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 11\n      }, this) : null, status === \"Đã cọc\" && show ? /*#__PURE__*/_jsxDEV(Row, {\n        className: \"main\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"danger\",\n            onClick: handleCancelAfterDeposit,\n            children: \"H\\u1EE7y y\\xEAu c\\u1EA7u\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            onClick: handleVehicleHanding,\n            children: \"Giao xe\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 11\n      }, this) : null, status === \"Đã trả xe\" && show ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          className: \"main m-auto\",\n          onClick: handleReceiveBackVehicle,\n          children: \"X\\xE1c nh\\u1EADn nh\\u1EADn xe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 11\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 7\n    }, this), openModal ? /*#__PURE__*/_jsxDEV(Modal, {\n      show: true,\n      onHide: handleCloseModal,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"C\\xE1c \\u0111\\xE1nh gi\\xE1 v\\u1EC1 kh\\xE1ch thu\\xEA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: allRate.length ? allRate.map((item, index) => {\n          return /*#__PURE__*/_jsxDEV(ItemReport, {\n            rate: item\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 22\n          }, this);\n        }) : \"Không có đánh giá nào\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 9\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n}\n\n_s(BookingRequest, \"aSra8MB6j4Mka6jTADqfetApXaU=\");\n\n_c = BookingRequest;\n\nvar _c;\n\n$RefreshReg$(_c, \"BookingRequest\");","map":{"version":3,"sources":["D:/hihi/senior-project/Frontend/src/components/mytrips/BookingRequest.jsx"],"names":["bookingApi","ItemReport","Field","Form","Formik","comma","formatDateTime","React","useEffect","useState","Button","Col","Row","BForm","Modal","AiOutlineRight","NOTI","store","noti","StarRatings","BookingRequest","props","booking","status","vehicle","user","openModal","setOpenModel","deposit","Math","round","amount","price","show","setShow","showRating","setShowRating","rated","setRated","content","numStar","allRate","setAllRate","handleChangeStar","star","handleCloseModal","handleCancel","window","confirm","rejectBooking","id","history","push","handleConfirm","confirmBooking","then","res","handleCancelAfterDeposit","cancelAfterDeposit","handleVehicleHanding","vehicleHanding","handleReceiveBackVehicle","receiveBackVehicle","getUserBookingRating","getAllUserRating","values","setSubmitting","console","log","ratingUser","type","driver","addNotification","title","message","dismiss","duration","width","field","mainImg","model","name","startTime","endTime","fullName","phone","length","map","item","index"],"mappings":";;;AAAA;AACA,OAAOA,UAAP,MAAuB,gBAAvB;AACA,OAAOC,UAAP,MAAuB,+BAAvB;AAEA,SAASC,KAAT,EAAgBC,IAAhB,EAAsBC,MAAtB,QAAoC,QAApC;AACA,SAASC,KAAT,EAAgBC,cAAhB,QAAsC,YAAtC;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,MAAT,EAAiBC,GAAjB,EAAsBC,GAAtB,EAA2BT,IAAI,IAAIU,KAAnC,EAA0CC,KAA1C,QAAuD,iBAAvD;AACA,SAASC,cAAT,QAA+B,gBAA/B;AACA,SAASC,IAAT,QAAqB,iBAArB,C,CACA;;AACA,SAASC,KAAK,IAAIC,IAAlB,QAA8B,+BAA9B;AACA,OAAOC,WAAP,MAAwB,oBAAxB;;AAEA,eAAe,SAASC,cAAT,CAAwBC,KAAxB,EAA+B;AAAA;;AAC5C,QAAMC,OAAO,GAAGD,KAAK,CAACC,OAAtB;AACA,QAAMC,MAAM,GAAGD,OAAO,CAACC,MAAvB;AACA,QAAMC,OAAO,GAAGF,OAAO,CAACE,OAAxB;AACA,QAAMC,IAAI,GAAGH,OAAO,CAACG,IAArB;AACA,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BlB,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAMmB,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAY,KAAKR,OAAO,CAACS,MAAd,GAAwB,MAAnC,IAA6C,IAA7D;AACA,QAAMC,KAAK,GAAGV,OAAO,CAACS,MAAR,GAAiBH,OAA/B;AACA,QAAM,CAACK,IAAD,EAAOC,OAAP,IAAkBzB,QAAQ,CAAC,IAAD,CAAhC;AACA,QAAM,CAAC0B,UAAD,EAAaC,aAAb,IAA8B3B,QAAQ,CAAC,KAAD,CAA5C;AACA,QAAM,CAAC4B,KAAD,EAAQC,QAAR,IAAoB7B,QAAQ,CAAC;AAAE8B,IAAAA,OAAO,EAAE,EAAX;AAAeC,IAAAA,OAAO,EAAE;AAAxB,GAAD,CAAlC;AACA,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBjC,QAAQ,CAAC,EAAD,CAAtC;;AACA,QAAMkC,gBAAgB,GAAIC,IAAD,IAAU;AACjCN,IAAAA,QAAQ,CAAC,EAAE,GAAGD,KAAL;AAAYG,MAAAA,OAAO,EAAEI;AAArB,KAAD,CAAR;AACD,GAFD;;AAGA,QAAMC,gBAAgB,GAAG,MAAM;AAC7BlB,IAAAA,YAAY,CAAC,KAAD,CAAZ;AACD,GAFD;;AAGA,QAAMmB,YAAY,GAAG,MAAM;AACzB,QAAIC,MAAM,CAACC,OAAP,CAAe,mCAAf,CAAJ,EAAyD;AACvDhD,MAAAA,UAAU,CAACiD,aAAX,CAAyB;AAAEC,QAAAA,EAAE,EAAE5B,OAAO,CAAC4B;AAAd,OAAzB;AACA7B,MAAAA,KAAK,CAAC8B,OAAN,CAAcC,IAAd,CAAmB,UAAnB;AACD;AACF,GALD;;AAMA,QAAMC,aAAa,GAAG,MAAM;AAC1BrD,IAAAA,UAAU,CAACsD,cAAX,CAA0B;AAAEJ,MAAAA,EAAE,EAAE5B,OAAO,CAAC4B;AAAd,KAA1B,EAA8CK,IAA9C,CAAoDC,GAAD,IAAS;AAC1DtB,MAAAA,OAAO,CAAC,KAAD,CAAP;AACD,KAFD;AAGD,GAJD;;AAKA,QAAMuB,wBAAwB,GAAG,MAAM;AACrC,QAAIV,MAAM,CAACC,OAAP,CAAe,mCAAf,CAAJ,EAAyD;AACvDhD,MAAAA,UAAU,CAAC0D,kBAAX,CAA8B;AAAER,QAAAA,EAAE,EAAE5B,OAAO,CAAC4B;AAAd,OAA9B,EAAkDK,IAAlD,CAAwDC,GAAD,IAAS;AAC9DnC,QAAAA,KAAK,CAAC8B,OAAN,CAAcC,IAAd,CAAmB,UAAnB;AACD,OAFD;AAGD;AACF,GAND;;AAOA,QAAMO,oBAAoB,GAAG,MAAM;AACjC3D,IAAAA,UAAU,CAAC4D,cAAX,CAA0B;AAAEV,MAAAA,EAAE,EAAE5B,OAAO,CAAC4B;AAAd,KAA1B,EAA8CK,IAA9C,CAAoDC,GAAD,IAAS;AAC1DtB,MAAAA,OAAO,CAAC,KAAD,CAAP;AACAE,MAAAA,aAAa,CAAC,IAAD,CAAb;AACD,KAHD;AAID,GALD;;AAMA,QAAMyB,wBAAwB,GAAG,MAAM;AACrC7D,IAAAA,UAAU,CAAC8D,kBAAX,CAA8B;AAAEZ,MAAAA,EAAE,EAAE5B,OAAO,CAAC4B;AAAd,KAA9B,EAAkDK,IAAlD,CAAwDC,GAAD,IAAS;AAC9DtB,MAAAA,OAAO,CAAC,KAAD,CAAP;AACD,KAFD;AAGD,GAJD;;AAKA1B,EAAAA,SAAS,CAAC,MAAM;AACd0B,IAAAA,OAAO,CAAC,IAAD,CAAP;AACD,GAFQ,EAEN,CAACb,KAAD,CAFM,CAAT;AAGAb,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIe,MAAM,KAAK,YAAf,EAA6B;AAC3BvB,MAAAA,UAAU,CAAC+D,oBAAX,CAAgC;AAAEb,QAAAA,EAAE,EAAE5B,OAAO,CAAC4B;AAAd,OAAhC,EAAoDK,IAApD,CAA0DC,GAAD,IAAS;AAChE,YAAIA,GAAJ,EAAS;AACPlB,UAAAA,QAAQ,CAACkB,GAAD,CAAR;AACD;AACF,OAJD;AAKD;;AACDxD,IAAAA,UAAU,CAACgE,gBAAX,CAA4B;AAAEd,MAAAA,EAAE,EAAE5B,OAAO,CAAC4B;AAAd,KAA5B,EAAgDK,IAAhD,CAAsDC,GAAD,IAAS;AAC5D,UAAIA,GAAJ,EAAS;AACPd,QAAAA,UAAU,CAACc,GAAD,CAAV;AACD;AACF,KAJD;AAKD,GAbQ,EAaN,EAbM,CAAT;AAcA,sBACE;AAAK,IAAA,SAAS,EAAC,kBAAf;AAAA,4BACE;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA,6BACE,QAAC,GAAD;AAAA,gCACE,QAAC,GAAD;AAAK,UAAA,EAAE,EAAE,CAAT;AAAY,UAAA,SAAS,EAAC,sBAAtB;AAAA,kCACE;AACE,YAAA,SAAS,EAAG,cAAajC,MAAM,KAAK,UAAX,GAAwB,QAAxB,GAAmC,EAAG,EADjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBANF,eAOE;AAAG,YAAA,SAAS,EAAC,YAAb;AAAA,mCACE,QAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAPF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAYE,QAAC,GAAD;AAAK,UAAA,EAAE,EAAE,CAAT;AAAY,UAAA,SAAS,EAAC,sBAAtB;AAAA,kCACE;AACE,YAAA,SAAS,EAAG,cAAaA,MAAM,KAAK,UAAX,GAAwB,QAAxB,GAAmC,EAAG,EADjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBANF,eAOE;AAAG,YAAA,SAAS,EAAC,YAAb;AAAA,mCACE,QAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAPF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAZF,eAuBE,QAAC,GAAD;AAAK,UAAA,EAAE,EAAE,CAAT;AAAY,UAAA,SAAS,EAAC,sBAAtB;AAAA,kCACE;AACE,YAAA,SAAS,EAAG,cACVA,MAAM,KAAK,QAAX,IACAA,MAAM,KAAK,YADX,IAEAA,MAAM,KAAK,YAFX,GAGI,QAHJ,GAII,EACL,EAPH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAYE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAZF,eAaE;AAAG,YAAA,SAAS,EAAC,YAAb;AAAA,mCACE,QAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAbF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAvBF,eAwCE,QAAC,GAAD;AAAK,UAAA,EAAE,EAAE,CAAT;AAAY,UAAA,SAAS,EAAC,sBAAtB;AAAA,kCACE;AACE,YAAA,SAAS,EAAG,cACVA,MAAM,KAAK,YAAX,IAA2BA,MAAM,KAAK,WAAtC,GACI,QADJ,GAEI,EACL,EALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAVF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAxCF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF,EAwDGA,MAAM,KAAK,QAAX,gBACC;AAAK,MAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADD,GAIGA,MAAM,KAAK,YAAX,gBACF;AAAK,MAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADE,GAIAA,MAAM,KAAK,YAAX,gBACF;AAAK,MAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADE,GAIAA,MAAM,KAAK,aAAX,gBACF;AAAK,MAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADE,GAIA,IAxEN,EAyEGA,MAAM,KAAK,YAAX,IAAyBY,UAAzB,gBACC;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAA,6BACE;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA,+BACE,QAAC,MAAD;AACE,UAAA,kBAAkB,EAAE,IADtB;AAEE,UAAA,aAAa,EAAE;AACb;AACAI,YAAAA,OAAO,EAAEF,KAAK,CAACE,OAFF;AAGbK,YAAAA,IAAI,EAAEP,KAAK,CAACG;AAHC,WAFjB;AAOE,UAAA,QAAQ,EAAE,OAAOyB,MAAP,EAAe;AAAEC,YAAAA;AAAF,WAAf,KAAqC;AAC7CC,YAAAA,OAAO,CAACC,GAAR,CAAYH,MAAZ;AACAjE,YAAAA,UAAU,CACPqE,UADH,CACc;AACVnB,cAAAA,EAAE,EAAE5B,OAAO,CAAC4B,EADF;AAEVV,cAAAA,OAAO,EAAEyB,MAAM,CAACrB,IAFN;AAGVL,cAAAA,OAAO,EAAE0B,MAAM,CAAC1B,OAHN;AAIV+B,cAAAA,IAAI,EAAE9C,OAAO,CAAC+C,MAAR,GAAiB,WAAjB,GAA+B;AAJ3B,aADd,EAOGhB,IAPH,CAOSC,GAAD,IAAS;AACbtC,cAAAA,IAAI,CAACsD,eAAL,CAAqB,EACnB,GAAGxD,IADgB;AAEnByD,gBAAAA,KAAK,EAAE,YAFY;AAGnBC,gBAAAA,OAAO,EAAE,0CAHU;AAInBJ,gBAAAA,IAAI,EAAE,SAJa;AAKnBK,gBAAAA,OAAO,EAAE;AACPC,kBAAAA,QAAQ,EAAE;AADH,iBALU;AAQnBC,gBAAAA,KAAK,EAAE;AARY,eAArB;AAUAxD,cAAAA,KAAK,CAAC8B,OAAN,CAAcC,IAAd,CAAmB,GAAnB;AACD,aAnBH;AAoBD,WA7BH;AAAA,iCA+BE,QAAC,IAAD;AAAA,oCACE;AAAK,cAAA,SAAS,EAAC,oCAAf;AAAA,qCACE,QAAC,WAAD;AACE,gBAAA,cAAc,EAAC,QADjB;AAEE,gBAAA,MAAM,EAAEf,KAAK,CAACG,OAFhB;AAGE,gBAAA,YAAY,EAAEG,gBAHhB;AAIE,gBAAA,aAAa,EAAE,CAJjB;AAKE,gBAAA,IAAI,EAAC;AALP;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBADF,eAUE,QAAC,KAAD,CAAO,KAAP;AAAa,cAAA,SAAS,EAAC,MAAvB;AAA8B,cAAA,SAAS,EAAC,UAAxC;AAAA,qCACE,QAAC,KAAD;AAAO,gBAAA,IAAI,EAAC,SAAZ;AAAA,0BACG,CAAC;AAAEmC,kBAAAA;AAAF,iBAAD,kBACC,QAAC,KAAD,CAAO,OAAP;AACE,kBAAA,YAAY,EAAC,KADf;AAEE,kBAAA,EAAE,EAAC,UAFL;AAAA,qBAGMA,KAHN;AAIE,kBAAA,WAAW,EAAC;AAJd;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBAVF,eAsBE,QAAC,MAAD;AAAQ,cAAA,OAAO,EAAC,SAAhB;AAA0B,cAAA,IAAI,EAAC,QAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAtBF;AAAA;AAAA;AAAA;AAAA;AAAA;AA/BF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADD,GA+DG,IAxIN,eAyIE;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAA,6BACE;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA,gCACE,QAAC,GAAD;AAAA,kCACE,QAAC,GAAD;AAAK,YAAA,EAAE,EAAE,CAAT;AAAA,mCACE;AAAK,cAAA,SAAS,EAAC,0BAAf;AAAA,sCACE;AAAK,gBAAA,SAAS,EAAC,oBAAf;AAAA,uCACE;AAAK,kBAAA,SAAS,EAAC,eAAf;AAAA,yCACE;AAAK,oBAAA,GAAG,EAAExD,OAAO,CAACE,OAAR,CAAgBuD,OAA1B;AAAmC,oBAAA,GAAG,EAAC;AAAvC;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBADF,eAME;AAAK,gBAAA,SAAS,EAAC,YAAf;AAAA,wCACE;AAAG,kBAAA,SAAS,EAAC,wBAAb;AAAA,4BACGzD,OAAO,CAACE,OAAR,CAAgBwD,KAAhB,CAAsBC;AADzB;AAAA;AAAA;AAAA;AAAA,wBADF,eAIE;AAAA,yDAAa3E,cAAc,CAACgB,OAAO,CAAC4D,SAAT,EAAoB,IAApB,CAA3B;AAAA;AAAA;AAAA;AAAA;AAAA,wBAJF,eAKE;AAAA,mDAAc5E,cAAc,CAACgB,OAAO,CAAC6D,OAAT,EAAkB,IAAlB,CAA5B;AAAA;AAAA;AAAA;AAAA;AAAA,wBALF;AAAA;AAAA;AAAA;AAAA;AAAA,sBANF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBADF,eAiBE,QAAC,GAAD;AAAK,YAAA,EAAE,EAAE,CAAT;AAAA,oCACE;AAAA,sDAAgB1D,IAAI,CAAC2D,QAArB;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAA,+DAAoB3D,IAAI,CAAC4D,KAAzB;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFF,eAGE;AAAM,cAAA,SAAS,EAAC,YAAhB;AAA6B,cAAA,OAAO,EAAE,MAAM1D,YAAY,CAAC,IAAD,CAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAjBF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eA0BE;AAAK,UAAA,SAAS,EAAC,aAAf;AAAA,kCACE;AAAK,YAAA,SAAS,EAAC,mBAAf;AAAA,oCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAI,cAAA,SAAS,EAAC,cAAd;AAAA,yBAA8BtB,KAAK,CAACuB,OAAD,CAAnC;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAKE;AAAK,YAAA,SAAS,EAAC,mBAAf;AAAA,oCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAA,yBAAKvB,KAAK,CAAC2B,KAAD,CAAV;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,kBALF;AAAA;AAAA;AAAA;AAAA;AAAA,gBA1BF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAzIF,eAgLE;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA,iBACGT,MAAM,KAAK,UAAX,IAAyBU,IAAzB,gBACC,QAAC,GAAD;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA,gCACE,QAAC,GAAD;AAAA,iCACE,QAAC,MAAD;AAAQ,YAAA,OAAO,EAAC,QAAhB;AAAyB,YAAA,OAAO,EAAEa,YAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADF,eAME,QAAC,GAAD;AAAA,iCACE,QAAC,MAAD;AAAQ,YAAA,OAAO,EAAEO,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBANF;AAAA;AAAA;AAAA;AAAA;AAAA,cADD,GAWG,IAZN,EAaG9B,MAAM,KAAK,QAAX,IAAuBU,IAAvB,gBACC,QAAC,GAAD;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA,gCACE,QAAC,GAAD;AAAA,iCACE,QAAC,MAAD;AAAQ,YAAA,OAAO,EAAC,QAAhB;AAAyB,YAAA,OAAO,EAAEwB,wBAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADF,eAME,QAAC,GAAD;AAAA,iCACE,QAAC,MAAD;AAAQ,YAAA,OAAO,EAAEE,oBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBANF;AAAA;AAAA;AAAA;AAAA;AAAA,cADD,GAWG,IAxBN,EAyBGpC,MAAM,KAAK,WAAX,IAA0BU,IAA1B,gBACC;AAAK,QAAA,SAAS,EAAC,+BAAf;AAAA,+BACE,QAAC,MAAD;AAAQ,UAAA,SAAS,EAAC,aAAlB;AAAgC,UAAA,OAAO,EAAE4B,wBAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADD,GAMG,IA/BN;AAAA;AAAA;AAAA;AAAA;AAAA,YAhLF,EAiNGnC,SAAS,gBACR,QAAC,KAAD;AAAO,MAAA,IAAI,EAAE,IAAb;AAAmB,MAAA,MAAM,EAAEmB,gBAA3B;AAAA,8BACE,QAAC,KAAD,CAAO,MAAP;AAAc,QAAA,WAAW,MAAzB;AAAA,+BACE,QAAC,KAAD,CAAO,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF,eAIE,QAAC,KAAD,CAAO,IAAP;AAAA,kBACGJ,OAAO,CAAC6C,MAAR,GAAe7C,OAAO,CAAC8C,GAAR,CAAY,CAACC,IAAD,EAAOC,KAAP,KAAiB;AAC3C,8BAAO,QAAC,UAAD;AAAY,YAAA,IAAI,EAAED;AAAlB,aAA6BC,KAA7B;AAAA;AAAA;AAAA;AAAA,kBAAP;AACD,SAFe,CAAf,GAEE;AAHL;AAAA;AAAA;AAAA;AAAA,cAJF;AAAA;AAAA;AAAA;AAAA;AAAA,YADQ,GAWN,IA5NN;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAgOD;;GAhSuBrE,c;;KAAAA,c","sourcesContent":["// @ts-nocheck\r\nimport bookingApi from \"api/bookingApi\";\r\nimport ItemReport from \"components/vehicle/ItemReport\";\r\n\r\nimport { Field, Form, Formik } from \"formik\";\r\nimport { comma, formatDateTime } from \"lib/Helper\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Button, Col, Row, Form as BForm, Modal } from \"react-bootstrap\";\r\nimport { AiOutlineRight } from \"react-icons/ai\";\r\nimport { NOTI } from \"constants/index\";\r\n//@ts-ignore\r\nimport { store as noti } from \"react-notifications-component\";\r\nimport StarRatings from \"react-star-ratings\";\r\n\r\nexport default function BookingRequest(props) {\r\n  const booking = props.booking;\r\n  const status = booking.status;\r\n  const vehicle = booking.vehicle;\r\n  const user = booking.user;\r\n  const [openModal, setOpenModel] = useState(false);\r\n  const deposit = Math.round((30 * booking.amount) / 100000) * 1000;\r\n  const price = booking.amount - deposit;\r\n  const [show, setShow] = useState(true);\r\n  const [showRating, setShowRating] = useState(false);\r\n  const [rated, setRated] = useState({ content: \"\", numStar: 0 });\r\n  const [allRate, setAllRate] = useState([]);\r\n  const handleChangeStar = (star) => {\r\n    setRated({ ...rated, numStar: star });\r\n  };\r\n  const handleCloseModal = () => {\r\n    setOpenModel(false);\r\n  };\r\n  const handleCancel = () => {\r\n    if (window.confirm(\"Bạn muốn hủy yêu cầu thuê xe này?\")) {\r\n      bookingApi.rejectBooking({ id: booking.id });\r\n      props.history.push(\"/mytrips\");\r\n    }\r\n  };\r\n  const handleConfirm = () => {\r\n    bookingApi.confirmBooking({ id: booking.id }).then((res) => {\r\n      setShow(false);\r\n    });\r\n  };\r\n  const handleCancelAfterDeposit = () => {\r\n    if (window.confirm(\"Bạn muốn hủy yêu cầu thuê xe này?\")) {\r\n      bookingApi.cancelAfterDeposit({ id: booking.id }).then((res) => {\r\n        props.history.push(\"/mytrips\");\r\n      });\r\n    }\r\n  };\r\n  const handleVehicleHanding = () => {\r\n    bookingApi.vehicleHanding({ id: booking.id }).then((res) => {\r\n      setShow(false);\r\n      setShowRating(true);\r\n    });\r\n  };\r\n  const handleReceiveBackVehicle = () => {\r\n    bookingApi.receiveBackVehicle({ id: booking.id }).then((res) => {\r\n      setShow(false);\r\n    });\r\n  };\r\n  useEffect(() => {\r\n    setShow(true);\r\n  }, [props]);\r\n  useEffect(() => {\r\n    if (status === \"Hoàn thành\") {\r\n      bookingApi.getUserBookingRating({ id: booking.id }).then((res) => {\r\n        if (res) {\r\n          setRated(res);\r\n        }\r\n      });\r\n    }\r\n    bookingApi.getAllUserRating({ id: booking.id }).then((res) => {\r\n      if (res) {\r\n        setAllRate(res);\r\n      }\r\n    });\r\n  }, []);\r\n  return (\r\n    <div className=\"register-vehicle\">\r\n      <div className=\"register-heading\">\r\n        <Row>\r\n          <Col lg={3} className=\"register-heading-tab\">\r\n            <div\r\n              className={`tab-number ${status === \"Đang chờ\" ? \"active\" : \"\"}`}\r\n            >\r\n              1\r\n            </div>\r\n            <p>Duyệt</p>\r\n            <i className=\"icon-after\">\r\n              <AiOutlineRight />\r\n            </i>\r\n          </Col>\r\n          <Col lg={3} className=\"register-heading-tab\">\r\n            <div\r\n              className={`tab-number ${status === \"Đã duyệt\" ? \"active\" : \"\"}`}\r\n            >\r\n              2\r\n            </div>\r\n            <p>Đợi thanh toán cọc</p>\r\n            <i className=\"icon-after\">\r\n              <AiOutlineRight />\r\n            </i>\r\n          </Col>\r\n          <Col lg={3} className=\"register-heading-tab\">\r\n            <div\r\n              className={`tab-number ${\r\n                status === \"Đã cọc\" ||\r\n                status === \"Đã giao xe\" ||\r\n                status === \"Đã nhận xe\"\r\n                  ? \"active\"\r\n                  : \"\"\r\n              }`}\r\n            >\r\n              3\r\n            </div>\r\n            <p>Giao xe</p>\r\n            <i className=\"icon-after\">\r\n              <AiOutlineRight />\r\n            </i>\r\n          </Col>\r\n          <Col lg={3} className=\"register-heading-tab\">\r\n            <div\r\n              className={`tab-number ${\r\n                status === \"Hoàn thành\" || status === \"Đã trả xe\"\r\n                  ? \"active\"\r\n                  : \"\"\r\n              }`}\r\n            >\r\n              4\r\n            </div>\r\n            <p>Kết thúc</p>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n      {status === \"Đã hủy\" ? (\r\n        <div className=\"text-danger booking--width\">\r\n          Người dùng đã hủy yêu cầu thuê xe!\r\n        </div>\r\n      ) : status === \"Đã từ chối\" ? (\r\n        <div className=\"text-danger booking--width\">\r\n          Bạn đã từ chối yêu cầu thuê xe!\r\n        </div>\r\n      ) : status === \"Đã hủy cọc\" ? (\r\n        <div className=\"text-danger booking--width\">\r\n          Bạn đã hủy yêu cầu thuê xe!\r\n        </div>\r\n      ) : status === \"Lấy lại cọc\" ? (\r\n        <div className=\"text-danger booking--width\">\r\n          Khách thuê đã lấy lại cọc và hủy yêu cầu!\r\n        </div>\r\n      ) : null}\r\n      {status === \"Hoàn thành\"||showRating ? (\r\n        <div className=\"register-body mt-2\">\r\n          <div className=\"booking--width\">\r\n            <Formik\r\n              enableReinitialize={true}\r\n              initialValues={{\r\n                // @ts-ignore\r\n                content: rated.content,\r\n                star: rated.numStar,\r\n              }}\r\n              onSubmit={async (values, { setSubmitting }) => {\r\n                console.log(values);\r\n                bookingApi\r\n                  .ratingUser({\r\n                    id: booking.id,\r\n                    numStar: values.star,\r\n                    content: values.content,\r\n                    type: vehicle.driver ? \"Có tài xế\" : \"Tự lái\",\r\n                  })\r\n                  .then((res) => {\r\n                    noti.addNotification({\r\n                      ...NOTI,\r\n                      title: \"Thành công\",\r\n                      message: \"Bạn đã đánh giá khách thuê thành công!!!\",\r\n                      type: \"success\",\r\n                      dismiss: {\r\n                        duration: 3000,\r\n                      },\r\n                      width: 160,\r\n                    });\r\n                    props.history.push(\"/\");\r\n                  });\r\n              }}\r\n            >\r\n              <Form>\r\n                <div className=\"d-flex justify-content-center mb-3\">\r\n                  <StarRatings\r\n                    starRatedColor=\"yellow\"\r\n                    rating={rated.numStar}\r\n                    changeRating={handleChangeStar}\r\n                    numberOfStars={5}\r\n                    name=\"rating\"\r\n                  />\r\n                </div>\r\n                <BForm.Group className=\"mb-3\" controlId=\"username\">\r\n                  <Field name=\"content\">\r\n                    {({ field }) => (\r\n                      <BForm.Control\r\n                        autoComplete=\"off\"\r\n                        as=\"textarea\"\r\n                        {...field}\r\n                        placeholder=\"Cho mọi người biết cảm nhận của bạn về khách thuê này\"\r\n                      />\r\n                    )}\r\n                  </Field>\r\n                </BForm.Group>\r\n                <Button variant=\"primary\" type=\"submit\">\r\n                  Gửi đánh giá\r\n                </Button>\r\n              </Form>\r\n            </Formik>\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n      <div className=\"register-body mt-2\">\r\n        <div className=\"booking--width\">\r\n          <Row>\r\n            <Col lg={7}>\r\n              <div className=\"booking__item--container\">\r\n                <div className=\"booking__item--img\">\r\n                  <div className=\"image-wrapper\">\r\n                    <img src={booking.vehicle.mainImg} alt=\"\" />\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-muted\">\r\n                  <p className=\"fw-bold fs-5 text-dark\">\r\n                    {booking.vehicle.model.name}\r\n                  </p>\r\n                  <p>Bắt đầu: {formatDateTime(booking.startTime, true)}</p>\r\n                  <p>Kết thúc: {formatDateTime(booking.endTime, true)}</p>\r\n                </div>\r\n              </div>\r\n            </Col>\r\n            <Col lg={5}>\r\n              <p>Người thuê: {user.fullName}</p>\r\n              <p>SĐT người thuê: {user.phone}</p>\r\n              <span className=\"text--link\" onClick={() => setOpenModel(true)}>\r\n                Xem đánh giá người thuê\r\n              </span>\r\n            </Col>\r\n          </Row>\r\n          <div className=\"text-center\">\r\n            <div className=\"bg-light p-3 mb-3\">\r\n              <p>Tiền cọc</p>\r\n              <h4 className=\"text-primary\">{comma(deposit)}₫</h4>\r\n            </div>\r\n            <div className=\"bg-light p-3 mb-3\">\r\n              <p>Tiền nhận từ người thuê</p>\r\n              <h4>{comma(price)}₫</h4>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"register-footer\">\r\n        {status === \"Đang chờ\" && show ? (\r\n          <Row className=\"main\">\r\n            <Col>\r\n              <Button variant=\"danger\" onClick={handleCancel}>\r\n                Từ chối yêu cầu\r\n              </Button>\r\n            </Col>\r\n            <Col>\r\n              <Button onClick={handleConfirm}>Chấp nhận yêu cầu</Button>\r\n            </Col>\r\n          </Row>\r\n        ) : null}\r\n        {status === \"Đã cọc\" && show ? (\r\n          <Row className=\"main\">\r\n            <Col>\r\n              <Button variant=\"danger\" onClick={handleCancelAfterDeposit}>\r\n                Hủy yêu cầu\r\n              </Button>\r\n            </Col>\r\n            <Col>\r\n              <Button onClick={handleVehicleHanding}>Giao xe</Button>\r\n            </Col>\r\n          </Row>\r\n        ) : null}\r\n        {status === \"Đã trả xe\" && show ? (\r\n          <div className=\"d-flex justify-content-center\">\r\n            <Button className=\"main m-auto\" onClick={handleReceiveBackVehicle}>\r\n              Xác nhận nhận xe\r\n            </Button>\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n      {openModal ? (\r\n        <Modal show={true} onHide={handleCloseModal}>\r\n          <Modal.Header closeButton>\r\n            <Modal.Title>Các đánh giá về khách thuê</Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>\r\n            {allRate.length?allRate.map((item, index) => {\r\n              return <ItemReport rate={item} key={index} />;\r\n            }):\"Không có đánh giá nào\"}\r\n          </Modal.Body>\r\n        </Modal>\r\n      ) : null}\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"D:\\\\hihi\\\\senior-project\\\\web\\\\src\\\\components\\\\Header\\\\ForgetPasswordForm.jsx\",\n    _s = $RefreshSig$();\n\n// @ts-nocheck\nimport UserApi from \"api/userApi\";\nimport { login } from \"app/slice/userSlice\";\nimport store from \"app/store\";\nimport Loading from \"components/layout/Loading\";\nimport Timer from \"components/Timer\";\nimport { NOTI } from \"constants/index\"; //@ts-ignore\n\nimport { store as noti } from \"react-notifications-component\";\nimport { ErrorMessage, Field, Form, Formik } from \"formik\";\nimport { validateEmail } from \"lib/Helper\";\nimport PropTypes from \"prop-types\";\nimport React, { useState } from \"react\";\nimport { Button, Form as BForm } from \"react-bootstrap\";\nimport * as Yup from \"yup\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ForgetPasswordForm(props) {\n  _s();\n\n  const handleClose = props.close;\n\n  const handleTimeOut = () => {\n    setTimeOut(true);\n  };\n\n  const [status, setStatus] = useState(\"idle\");\n  const [email, setEmail] = useState(\"\");\n  const [timeOut, setTimeOut] = useState(true);\n\n  const handleReSend = () => {\n    if (validateEmail(email)) {\n      setStatus(\"idle\");\n      setTimeOut(false);\n      UserApi.forgetPassword({\n        email\n      }).catch(() => {\n        setTimeOut(true);\n        setStatus(\"wrongEmail\");\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Formik, {\n    enableReinitialize: true,\n    initialValues: {\n      email: \"\",\n      password: \"\",\n      newPasswor: \"\",\n      rePassword: \"\"\n    },\n    validationSchema: Yup.object({\n      email: Yup.string().required(\"Đây là trường bắt buộc\").email(\"Sai định dạng email\"),\n      password: Yup.string().required(\"Đây là trường bắt buộc\"),\n      newPassword: Yup.string().required(\"Đây là trường bắt buộc\"),\n      rePassword: Yup.string().required(\"Đây là trường bắt buộc\").oneOf([Yup.ref(\"newPassword\")], \"Mật khẩu nhập lại không khớp\")\n    }),\n    onSubmit: values => {\n      setStatus(\"loading\");\n      UserApi.forgetChangePassword(values).then(res => {\n        store.dispatch(login(res));\n        noti.addNotification({ ...NOTI,\n          title: \"Thành công\",\n          message: \"Thay đổi mật khẩu thành công\",\n          type: \"success\",\n          dismiss: {\n            duration: 2000\n          },\n          width: 160\n        });\n        handleClose();\n        setStatus(\"idle\");\n      }).catch(res => {\n        setStatus(\"wrong\");\n      });\n    },\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      children: [/*#__PURE__*/_jsxDEV(BForm.Group, {\n        className: \"mb-3\",\n        controlId: \"email\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"position-relative text-danger text-center\",\n          children: status === \"loading\" ? /*#__PURE__*/_jsxDEV(Loading, {\n            type: \"inline\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 15\n          }, this) : status === \"wrong\" ? \"Mật khẩu sai\" : status === \"wrongEmail\" ? \"Email chưa được đăng ký\" : null\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BForm.Label, {\n          children: \"Nh\\u1EADp email c\\u1EE7a b\\u1EA1n*:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Field, {\n          name: \"email\",\n          children: ({\n            field\n          }) => /*#__PURE__*/_jsxDEV(BForm.Control, {\n            type: \"text\",\n            ...field,\n            onChange: evt => {\n              field.onChange(evt);\n              setEmail(evt.target.value);\n            },\n            placeholder: \"Nh\\u1EADp email c\\u1EE7a b\\u1EA1n v\\xE0 b\\u1EA5m g\\u1EEDi l\\u1EA1i m\\u1EADt kh\\u1EA9u!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BForm.Text, {\n          className: \"text-danger\",\n          children: /*#__PURE__*/_jsxDEV(ErrorMessage, {\n            name: \"email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(BForm.Group, {\n        className: \"mb-3\",\n        controlId: \"password\",\n        children: [/*#__PURE__*/_jsxDEV(BForm.Label, {\n          children: \"M\\u1EADt kh\\u1EA9u \\u0111\\u01B0\\u1EE3c g\\u1EEDi qua mail*:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Field, {\n          name: \"password\",\n          children: ({\n            field\n          }) => /*#__PURE__*/_jsxDEV(BForm.Control, {\n            type: \"password\",\n            ...field,\n            placeholder: \"Nh\\u1EADp m\\u1EADt kh\\u1EA9u \\u0111\\xE3 \\u0111\\u01B0\\u1EE3c ch\\xFAng t\\xF4i g\\u1EEDi t\\u1EDBi mail!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BForm.Text, {\n          className: \"text-danger\",\n          children: /*#__PURE__*/_jsxDEV(ErrorMessage, {\n            name: \"password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(BForm.Group, {\n        className: \"mb-3\",\n        controlId: \"newPassword\",\n        children: [/*#__PURE__*/_jsxDEV(BForm.Label, {\n          children: \"M\\u1EADt kh\\u1EA9u m\\u1EDBi*:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Field, {\n          name: \"newPassword\",\n          children: ({\n            field\n          }) => /*#__PURE__*/_jsxDEV(BForm.Control, {\n            type: \"password\",\n            ...field,\n            placeholder: \"M\\xE3 \\u0111\\xE3 \\u0111\\u01B0\\u1EE3c g\\u1EEDi t\\u1EDBi email c\\u1EE7a b\\u1EA1n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BForm.Text, {\n          className: \"text-danger\",\n          children: /*#__PURE__*/_jsxDEV(ErrorMessage, {\n            name: \"newPassword\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(BForm.Group, {\n        className: \"mb-3\",\n        controlId: \"rePassword\",\n        children: [/*#__PURE__*/_jsxDEV(BForm.Label, {\n          children: \"Nh\\u1EADp l\\u1EA1i m\\u1EADt kh\\u1EA9u m\\u1EDBi*:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Field, {\n          name: \"rePassword\",\n          children: ({\n            field\n          }) => /*#__PURE__*/_jsxDEV(BForm.Control, {\n            type: \"password\",\n            ...field,\n            placeholder: \"Nh\\u1EADp l\\u1EA1i m\\u1EADt kh\\u1EA9u m\\u1EDBi c\\u1EE7a b\\u1EA1n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BForm.Text, {\n          className: \"text-danger\",\n          children: /*#__PURE__*/_jsxDEV(ErrorMessage, {\n            name: \"rePassword\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline-primary w-50\",\n          disabled: !timeOut,\n          onClick: handleReSend,\n          children: [\"G\\u1EEDi l\\u1EA1i m\\u1EADt kh\\u1EA9u\", \" \", !timeOut ? /*#__PURE__*/_jsxDEV(Timer, {\n            seconds: 60,\n            timeOut: handleTimeOut\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 25\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary w-50\",\n          type: \"submit\",\n          children: \"\\u0110\\u1ED5i m\\u1EADt kh\\u1EA9u\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ForgetPasswordForm, \"RlRGMJVqM8gvZdMMDYgaVIXCJ8g=\");\n\n_c = ForgetPasswordForm;\nForgetPasswordForm.propTypes = {\n  close: PropTypes.func.isRequired\n};\nexport default ForgetPasswordForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"ForgetPasswordForm\");","map":{"version":3,"sources":["D:/hihi/senior-project/web/src/components/Header/ForgetPasswordForm.jsx"],"names":["UserApi","login","store","Loading","Timer","NOTI","noti","ErrorMessage","Field","Form","Formik","validateEmail","PropTypes","React","useState","Button","BForm","Yup","ForgetPasswordForm","props","handleClose","close","handleTimeOut","setTimeOut","status","setStatus","email","setEmail","timeOut","handleReSend","forgetPassword","catch","password","newPasswor","rePassword","object","string","required","newPassword","oneOf","ref","values","forgetChangePassword","then","res","dispatch","addNotification","title","message","type","dismiss","duration","width","field","evt","onChange","target","value","propTypes","func","isRequired"],"mappings":";;;AAAA;AACA,OAAOA,OAAP,MAAoB,aAApB;AACA,SAASC,KAAT,QAAsB,qBAAtB;AACA,OAAOC,KAAP,MAAkB,WAAlB;AACA,OAAOC,OAAP,MAAoB,2BAApB;AACA,OAAOC,KAAP,MAAkB,kBAAlB;AACA,SAASC,IAAT,QAAqB,iBAArB,C,CACA;;AACA,SAASH,KAAK,IAAII,IAAlB,QAA8B,+BAA9B;AACA,SAASC,YAAT,EAAuBC,KAAvB,EAA8BC,IAA9B,EAAoCC,MAApC,QAAkD,QAAlD;AACA,SAASC,aAAT,QAA8B,YAA9B;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,MAAT,EAAiBN,IAAI,IAAIO,KAAzB,QAAsC,iBAAtC;AAEA,OAAO,KAAKC,GAAZ,MAAqB,KAArB;;;AAEA,SAASC,kBAAT,CAA4BC,KAA5B,EAAmC;AAAA;;AACjC,QAAMC,WAAW,GAAGD,KAAK,CAACE,KAA1B;;AACA,QAAMC,aAAa,GAAG,MAAM;AAC1BC,IAAAA,UAAU,CAAC,IAAD,CAAV;AACD,GAFD;;AAGA,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBX,QAAQ,CAAC,MAAD,CAApC;AACA,QAAM,CAACY,KAAD,EAAQC,QAAR,IAAoBb,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACc,OAAD,EAAUL,UAAV,IAAwBT,QAAQ,CAAC,IAAD,CAAtC;;AACA,QAAMe,YAAY,GAAG,MAAM;AACzB,QAAIlB,aAAa,CAACe,KAAD,CAAjB,EAA0B;AACxBD,MAAAA,SAAS,CAAC,MAAD,CAAT;AACAF,MAAAA,UAAU,CAAC,KAAD,CAAV;AACAvB,MAAAA,OAAO,CAAC8B,cAAR,CAAuB;AAAEJ,QAAAA;AAAF,OAAvB,EAAkCK,KAAlC,CAAwC,MAAM;AAC5CR,QAAAA,UAAU,CAAC,IAAD,CAAV;AACAE,QAAAA,SAAS,CAAC,YAAD,CAAT;AACD,OAHD;AAID;AACF,GATD;;AAUA,sBACE,QAAC,MAAD;AACE,IAAA,kBAAkB,EAAE,IADtB;AAEE,IAAA,aAAa,EAAE;AACbC,MAAAA,KAAK,EAAC,EADO;AAEbM,MAAAA,QAAQ,EAAE,EAFG;AAGbC,MAAAA,UAAU,EAAE,EAHC;AAIbC,MAAAA,UAAU,EAAE;AAJC,KAFjB;AAQE,IAAA,gBAAgB,EAAEjB,GAAG,CAACkB,MAAJ,CAAW;AAC3BT,MAAAA,KAAK,EAAET,GAAG,CAACmB,MAAJ,GACJC,QADI,CACK,wBADL,EAEJX,KAFI,CAEE,qBAFF,CADoB;AAI3BM,MAAAA,QAAQ,EAAEf,GAAG,CAACmB,MAAJ,GAAaC,QAAb,CAAsB,wBAAtB,CAJiB;AAK3BC,MAAAA,WAAW,EAAErB,GAAG,CAACmB,MAAJ,GAAaC,QAAb,CAAsB,wBAAtB,CALc;AAM3BH,MAAAA,UAAU,EAAEjB,GAAG,CAACmB,MAAJ,GACTC,QADS,CACA,wBADA,EAETE,KAFS,CAEH,CAACtB,GAAG,CAACuB,GAAJ,CAAQ,aAAR,CAAD,CAFG,EAEuB,8BAFvB;AANe,KAAX,CARpB;AAkBE,IAAA,QAAQ,EAAGC,MAAD,IAAY;AACpBhB,MAAAA,SAAS,CAAC,SAAD,CAAT;AACAzB,MAAAA,OAAO,CAAC0C,oBAAR,CAA6BD,MAA7B,EACGE,IADH,CACSC,GAAD,IAAS;AACb1C,QAAAA,KAAK,CAAC2C,QAAN,CAAe5C,KAAK,CAAC2C,GAAD,CAApB;AACAtC,QAAAA,IAAI,CAACwC,eAAL,CAAqB,EACnB,GAAGzC,IADgB;AAEnB0C,UAAAA,KAAK,EAAC,YAFa;AAGnBC,UAAAA,OAAO,EAAE,8BAHU;AAInBC,UAAAA,IAAI,EAAE,SAJa;AAKnBC,UAAAA,OAAO,EAAE;AACPC,YAAAA,QAAQ,EAAE;AADH,WALU;AAQnBC,UAAAA,KAAK,EAAE;AARY,SAArB;AAUAhC,QAAAA,WAAW;AACXK,QAAAA,SAAS,CAAC,MAAD,CAAT;AACD,OAfH,EAgBGM,KAhBH,CAgBUa,GAAD,IAAS;AACdnB,QAAAA,SAAS,CAAC,OAAD,CAAT;AACD,OAlBH;AAmBD,KAvCH;AAAA,2BAyCE,QAAC,IAAD;AAAA,8BACE,QAAC,KAAD,CAAO,KAAP;AAAa,QAAA,SAAS,EAAC,MAAvB;AAA8B,QAAA,SAAS,EAAC,OAAxC;AAAA,gCACE;AAAK,UAAA,SAAS,EAAC,2CAAf;AAAA,oBACGD,MAAM,KAAK,SAAX,gBACC,QAAC,OAAD;AAAS,YAAA,IAAI,EAAC;AAAd;AAAA;AAAA;AAAA;AAAA,kBADD,GAEGA,MAAM,KAAK,OAAX,GACF,cADE,GAEAA,MAAM,KAAK,YAAX,GACF,yBADE,GAEA;AAPN;AAAA;AAAA;AAAA;AAAA,gBADF,eAUE,QAAC,KAAD,CAAO,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAVF,eAWE,QAAC,KAAD;AAAO,UAAA,IAAI,EAAC,OAAZ;AAAA,oBACG,CAAC;AAAE6B,YAAAA;AAAF,WAAD,kBACC,QAAC,KAAD,CAAO,OAAP;AACE,YAAA,IAAI,EAAC,MADP;AAAA,eAEMA,KAFN;AAGE,YAAA,QAAQ,EAAGC,GAAD,IAAS;AACjBD,cAAAA,KAAK,CAACE,QAAN,CAAeD,GAAf;AACA3B,cAAAA,QAAQ,CAAC2B,GAAG,CAACE,MAAJ,CAAWC,KAAZ,CAAR;AACD,aANH;AAOE,YAAA,WAAW,EAAC;AAPd;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,gBAXF,eAwBE,QAAC,KAAD,CAAO,IAAP;AAAY,UAAA,SAAS,EAAC,aAAtB;AAAA,iCACE,QAAC,YAAD;AAAc,YAAA,IAAI,EAAC;AAAnB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAxBF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eA6BE,QAAC,KAAD,CAAO,KAAP;AAAa,QAAA,SAAS,EAAC,MAAvB;AAA8B,QAAA,SAAS,EAAC,UAAxC;AAAA,gCACE,QAAC,KAAD,CAAO,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE,QAAC,KAAD;AAAO,UAAA,IAAI,EAAC,UAAZ;AAAA,oBACG,CAAC;AAAEJ,YAAAA;AAAF,WAAD,kBACC,QAAC,KAAD,CAAO,OAAP;AACE,YAAA,IAAI,EAAC,UADP;AAAA,eAEMA,KAFN;AAGE,YAAA,WAAW,EAAC;AAHd;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,gBAFF,eAWE,QAAC,KAAD,CAAO,IAAP;AAAY,UAAA,SAAS,EAAC,aAAtB;AAAA,iCACE,QAAC,YAAD;AAAc,YAAA,IAAI,EAAC;AAAnB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAXF;AAAA;AAAA;AAAA;AAAA;AAAA,cA7BF,eA4CE,QAAC,KAAD,CAAO,KAAP;AAAa,QAAA,SAAS,EAAC,MAAvB;AAA8B,QAAA,SAAS,EAAC,aAAxC;AAAA,gCACE,QAAC,KAAD,CAAO,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE,QAAC,KAAD;AAAO,UAAA,IAAI,EAAC,aAAZ;AAAA,oBACG,CAAC;AAAEA,YAAAA;AAAF,WAAD,kBACC,QAAC,KAAD,CAAO,OAAP;AACE,YAAA,IAAI,EAAC,UADP;AAAA,eAEMA,KAFN;AAGE,YAAA,WAAW,EAAC;AAHd;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,gBAFF,eAWE,QAAC,KAAD,CAAO,IAAP;AAAY,UAAA,SAAS,EAAC,aAAtB;AAAA,iCACE,QAAC,YAAD;AAAc,YAAA,IAAI,EAAC;AAAnB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAXF;AAAA;AAAA;AAAA;AAAA;AAAA,cA5CF,eA2DE,QAAC,KAAD,CAAO,KAAP;AAAa,QAAA,SAAS,EAAC,MAAvB;AAA8B,QAAA,SAAS,EAAC,YAAxC;AAAA,gCACE,QAAC,KAAD,CAAO,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE,QAAC,KAAD;AAAO,UAAA,IAAI,EAAC,YAAZ;AAAA,oBACG,CAAC;AAAEA,YAAAA;AAAF,WAAD,kBACC,QAAC,KAAD,CAAO,OAAP;AACE,YAAA,IAAI,EAAC,UADP;AAAA,eAEMA,KAFN;AAGE,YAAA,WAAW,EAAC;AAHd;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,gBAFF,eAWE,QAAC,KAAD,CAAO,IAAP;AAAY,UAAA,SAAS,EAAC,aAAtB;AAAA,iCACE,QAAC,YAAD;AAAc,YAAA,IAAI,EAAC;AAAnB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAXF;AAAA;AAAA;AAAA;AAAA;AAAA,cA3DF,eA0EE;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA,gCACE,QAAC,MAAD;AACE,UAAA,OAAO,EAAC,sBADV;AAEE,UAAA,QAAQ,EAAE,CAACzB,OAFb;AAGE,UAAA,OAAO,EAAEC,YAHX;AAAA,6DAKmB,GALnB,EAMG,CAACD,OAAD,gBAAW,QAAC,KAAD;AAAO,YAAA,OAAO,EAAE,EAAhB;AAAoB,YAAA,OAAO,EAAEN;AAA7B;AAAA;AAAA;AAAA;AAAA,kBAAX,GAA4D,IAN/D;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eASE,QAAC,MAAD;AAAQ,UAAA,OAAO,EAAC,cAAhB;AAA+B,UAAA,IAAI,EAAC,QAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBATF;AAAA;AAAA;AAAA;AAAA;AAAA,cA1EF;AAAA;AAAA;AAAA;AAAA;AAAA;AAzCF;AAAA;AAAA;AAAA;AAAA,UADF;AAoID;;GAtJQJ,kB;;KAAAA,kB;AAwJTA,kBAAkB,CAACwC,SAAnB,GAA+B;AAC7BrC,EAAAA,KAAK,EAAET,SAAS,CAAC+C,IAAV,CAAeC;AADO,CAA/B;AAIA,eAAe1C,kBAAf","sourcesContent":["// @ts-nocheck\r\nimport UserApi from \"api/userApi\";\r\nimport { login } from \"app/slice/userSlice\";\r\nimport store from \"app/store\";\r\nimport Loading from \"components/layout/Loading\";\r\nimport Timer from \"components/Timer\";\r\nimport { NOTI } from \"constants/index\";\r\n//@ts-ignore\r\nimport { store as noti } from \"react-notifications-component\";\r\nimport { ErrorMessage, Field, Form, Formik } from \"formik\";\r\nimport { validateEmail } from \"lib/Helper\";\r\nimport PropTypes from \"prop-types\";\r\nimport React, { useState } from \"react\";\r\nimport { Button, Form as BForm } from \"react-bootstrap\";\r\n\r\nimport * as Yup from \"yup\";\r\n\r\nfunction ForgetPasswordForm(props) {\r\n  const handleClose = props.close;\r\n  const handleTimeOut = () => {\r\n    setTimeOut(true);\r\n  };\r\n  const [status, setStatus] = useState(\"idle\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [timeOut, setTimeOut] = useState(true);\r\n  const handleReSend = () => {\r\n    if (validateEmail(email)) {\r\n      setStatus(\"idle\")\r\n      setTimeOut(false);\r\n      UserApi.forgetPassword({ email }).catch(() => {\r\n        setTimeOut(true);\r\n        setStatus(\"wrongEmail\");\r\n      });\r\n    }\r\n  };\r\n  return (\r\n    <Formik\r\n      enableReinitialize={true}\r\n      initialValues={{\r\n        email:\"\",\r\n        password: \"\",\r\n        newPasswor: \"\",\r\n        rePassword: \"\",\r\n      }}\r\n      validationSchema={Yup.object({\r\n        email: Yup.string()\r\n          .required(\"Đây là trường bắt buộc\")\r\n          .email(\"Sai định dạng email\"),\r\n        password: Yup.string().required(\"Đây là trường bắt buộc\"),\r\n        newPassword: Yup.string().required(\"Đây là trường bắt buộc\"),\r\n        rePassword: Yup.string()\r\n          .required(\"Đây là trường bắt buộc\")\r\n          .oneOf([Yup.ref(\"newPassword\")], \"Mật khẩu nhập lại không khớp\"),\r\n      })}\r\n      onSubmit={(values) => {\r\n        setStatus(\"loading\");\r\n        UserApi.forgetChangePassword(values)\r\n          .then((res) => {\r\n            store.dispatch(login(res));\r\n            noti.addNotification({\r\n              ...NOTI,\r\n              title:\"Thành công\",\r\n              message: \"Thay đổi mật khẩu thành công\",\r\n              type: \"success\",\r\n              dismiss: {\r\n                duration: 2000,\r\n              },\r\n              width: 160,\r\n            });\r\n            handleClose();\r\n            setStatus(\"idle\");\r\n          })\r\n          .catch((res) => {\r\n            setStatus(\"wrong\");\r\n          });\r\n      }}\r\n    >\r\n      <Form>\r\n        <BForm.Group className=\"mb-3\" controlId=\"email\">\r\n          <div className=\"position-relative text-danger text-center\">\r\n            {status === \"loading\" ? (\r\n              <Loading type=\"inline\" />\r\n            ) : status === \"wrong\" ? (\r\n              \"Mật khẩu sai\"\r\n            ) : status === \"wrongEmail\" ? (\r\n              \"Email chưa được đăng ký\"\r\n            ) : null}\r\n          </div>\r\n          <BForm.Label>Nhập email của bạn*:</BForm.Label>\r\n          <Field name=\"email\">\r\n            {({ field }) => (\r\n              <BForm.Control\r\n                type=\"text\"\r\n                {...field}\r\n                onChange={(evt) => {\r\n                  field.onChange(evt);\r\n                  setEmail(evt.target.value);\r\n                }}\r\n                placeholder=\"Nhập email của bạn và bấm gửi lại mật khẩu!\"\r\n              />\r\n            )}\r\n          </Field>\r\n          <BForm.Text className=\"text-danger\">\r\n            <ErrorMessage name=\"email\" />\r\n          </BForm.Text>\r\n        </BForm.Group>\r\n        <BForm.Group className=\"mb-3\" controlId=\"password\">\r\n          <BForm.Label>Mật khẩu được gửi qua mail*:</BForm.Label>\r\n          <Field name=\"password\">\r\n            {({ field }) => (\r\n              <BForm.Control\r\n                type=\"password\"\r\n                {...field}\r\n                placeholder=\"Nhập mật khẩu đã được chúng tôi gửi tới mail!\"\r\n              />\r\n            )}\r\n          </Field>\r\n          <BForm.Text className=\"text-danger\">\r\n            <ErrorMessage name=\"password\" />\r\n          </BForm.Text>\r\n        </BForm.Group>\r\n        <BForm.Group className=\"mb-3\" controlId=\"newPassword\">\r\n          <BForm.Label>Mật khẩu mới*:</BForm.Label>\r\n          <Field name=\"newPassword\">\r\n            {({ field }) => (\r\n              <BForm.Control\r\n                type=\"password\"\r\n                {...field}\r\n                placeholder=\"Mã đã được gửi tới email của bạn\"\r\n              />\r\n            )}\r\n          </Field>\r\n          <BForm.Text className=\"text-danger\">\r\n            <ErrorMessage name=\"newPassword\" />\r\n          </BForm.Text>\r\n        </BForm.Group>\r\n        <BForm.Group className=\"mb-3\" controlId=\"rePassword\">\r\n          <BForm.Label>Nhập lại mật khẩu mới*:</BForm.Label>\r\n          <Field name=\"rePassword\">\r\n            {({ field }) => (\r\n              <BForm.Control\r\n                type=\"password\"\r\n                {...field}\r\n                placeholder=\"Nhập lại mật khẩu mới của bạn\"\r\n              />\r\n            )}\r\n          </Field>\r\n          <BForm.Text className=\"text-danger\">\r\n            <ErrorMessage name=\"rePassword\" />\r\n          </BForm.Text>\r\n        </BForm.Group>\r\n        <div className=\"d-flex gap-2\">\r\n          <Button\r\n            variant=\"outline-primary w-50\"\r\n            disabled={!timeOut}\r\n            onClick={handleReSend}\r\n          >\r\n            Gửi lại mật khẩu{\" \"}\r\n            {!timeOut ? <Timer seconds={60} timeOut={handleTimeOut} /> : null}\r\n          </Button>\r\n          <Button variant=\"primary w-50\" type=\"submit\">\r\n            Đổi mật khẩu\r\n          </Button>\r\n        </div>\r\n      </Form>\r\n    </Formik>\r\n  );\r\n}\r\n\r\nForgetPasswordForm.propTypes = {\r\n  close: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ForgetPasswordForm;\r\n"]},"metadata":{},"sourceType":"module"}
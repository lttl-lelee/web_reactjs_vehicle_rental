{"ast":null,"code":"var _jsxFileName = \"D:\\\\hihi\\\\senior-project\\\\web\\\\src\\\\components\\\\vehicle\\\\PromotionForm.jsx\",\n    _s = $RefreshSig$();\n\nimport bookingApi from \"api/bookingApi\";\nimport { addPromotion, removePromotion } from \"app/slice/bookingSlice\";\nimport store from \"app/store\";\nimport Loading from \"components/layout/Loading\";\nimport { NOTI } from \"constants/index\";\nimport React, { useState } from \"react\";\nimport { Button, Col, Form } from \"react-bootstrap\";\nimport { BsTrash } from \"react-icons/bs\"; //@ts-ignore\n\nimport { store as noti } from \"react-notifications-component\";\nimport { useSelector } from \"react-redux\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction PromotionForm(props) {\n  _s();\n\n  const [code, setCode] = useState(\"\");\n  const [status, setStatus] = useState(\"\"); //@ts-ignore\n\n  const logged = useSelector(state => state.logged); //@ts-ignore\n\n  const promotion = useSelector(state => state.booking).data.promotion;\n\n  const handleChange = evt => setCode(evt.target.value);\n\n  const handleCheckPromotion = () => {\n    if (!logged.data) {} else {\n      setStatus(\"loading\");\n      bookingApi.checkPromotion({\n        code\n      }).then(res => {\n        setStatus(\"idle\");\n        store.dispatch(addPromotion(res));\n      }).catch(() => {\n        setStatus(\"error\");\n      });\n    }\n  };\n\n  const handleRemovePromotion = () => {\n    setStatus(\"\");\n    store.dispatch(removePromotion());\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [status === \"loading\" ? /*#__PURE__*/_jsxDEV(Loading, {\n      type: \"inline\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 31\n    }, this) : null, promotion ? /*#__PURE__*/_jsxDEV(Col, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"promotion--success\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"promotion__item\",\n          children: promotion.code\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"promotion__item\",\n          children: [\"-\", promotion.discount, \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"promotion__item\",\n          onClick: handleRemovePromotion,\n          children: /*#__PURE__*/_jsxDEV(BsTrash, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n        as: Col,\n        xs: 7,\n        sm: 8,\n        children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"text\",\n          className: code ? \"text-uppercase\" : null,\n          placeholder: \"M\\xE3 gi\\u1EA3m gi\\xE1\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Text, {\n          className: \"text-danger\",\n          children: status === \"error\" ? \"Mã không tồn tại hoặc đã hết lượt sử dụng!\" : null\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        as: Col,\n        xs: 5,\n        sm: 4,\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          className: \"w-100 h-auto\",\n          onClick: handleCheckPromotion,\n          children: \"S\\u1EED d\\u1EE5ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true);\n}\n\n_s(PromotionForm, \"4e4Q0X9yicE3W+a0Cl/8QtTO9iE=\", false, function () {\n  return [useSelector, useSelector];\n});\n\n_c = PromotionForm;\nPromotionForm.propTypes = {};\nexport default PromotionForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"PromotionForm\");","map":{"version":3,"sources":["D:/hihi/senior-project/web/src/components/vehicle/PromotionForm.jsx"],"names":["bookingApi","addPromotion","removePromotion","store","Loading","NOTI","React","useState","Button","Col","Form","BsTrash","noti","useSelector","PromotionForm","props","code","setCode","status","setStatus","logged","state","promotion","booking","data","handleChange","evt","target","value","handleCheckPromotion","checkPromotion","then","res","dispatch","catch","handleRemovePromotion","discount","propTypes"],"mappings":"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","sourcesContent":["import bookingApi from \"api/bookingApi\";\r\nimport { addPromotion, removePromotion } from \"app/slice/bookingSlice\";\r\nimport store from \"app/store\";\r\nimport Loading from \"components/layout/Loading\";\r\nimport { NOTI } from \"constants/index\";\r\nimport React, { useState } from \"react\";\r\nimport { Button, Col, Form } from \"react-bootstrap\";\r\nimport { BsTrash } from \"react-icons/bs\";\r\n//@ts-ignore\r\nimport { store as noti } from \"react-notifications-component\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nfunction PromotionForm(props) {\r\n  const [code, setCode] = useState(\"\");\r\n  const [status, setStatus] = useState(\"\");\r\n  //@ts-ignore\r\n  const logged = useSelector((state) => state.logged);\r\n  //@ts-ignore\r\n  const promotion = useSelector((state) => state.booking).data.promotion;\r\n  const handleChange = (evt) => setCode(evt.target.value);\r\n  const handleCheckPromotion = () => {\r\n    if (!logged.data) {\r\n    } else {\r\n      setStatus(\"loading\");\r\n      bookingApi\r\n        .checkPromotion({ code })\r\n        .then((res) => {\r\n          setStatus(\"idle\");\r\n          store.dispatch(addPromotion(res));\r\n        })\r\n        .catch(() => {\r\n          setStatus(\"error\");\r\n        });\r\n    }\r\n  };\r\n  const handleRemovePromotion = () => {\r\n    setStatus(\"\");\r\n    store.dispatch(removePromotion());\r\n  };\r\n  return (\r\n    <>\r\n      {status === \"loading\" ? <Loading type=\"inline\" /> : null}\r\n      {promotion ? (\r\n        <Col>\r\n          <div className=\"promotion--success\">\r\n            <div className=\"promotion__item\">{promotion.code}</div>\r\n            <div className=\"promotion__item\">-{promotion.discount}%</div>\r\n            <div className=\"promotion__item\" onClick={handleRemovePromotion}>\r\n              <BsTrash />\r\n            </div>\r\n          </div>\r\n        </Col>\r\n      ) : (\r\n        <>\r\n          <Form.Group as={Col} xs={7} sm={8}>\r\n            <Form.Control\r\n              type=\"text\"\r\n              className={code ? \"text-uppercase\" : null}\r\n              placeholder=\"Mã giảm giá\"\r\n              onChange={handleChange}\r\n            />\r\n            <Form.Text className=\"text-danger\">\r\n              {status === \"error\"\r\n                ? \"Mã không tồn tại hoặc đã hết lượt sử dụng!\"\r\n                : null}\r\n            </Form.Text>\r\n          </Form.Group>\r\n          <Form.Group as={Col} xs={5} sm={4}>\r\n            <Button className=\"w-100 h-auto\" onClick={handleCheckPromotion}>\r\n              Sử dụng\r\n            </Button>\r\n          </Form.Group>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nPromotionForm.propTypes = {};\r\n\r\nexport default PromotionForm;\r\n"]},"metadata":{},"sourceType":"module"}